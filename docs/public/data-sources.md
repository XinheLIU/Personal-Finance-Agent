### Data Sources

The system relies on multiple data sources to gather price, fundamental, and economic data for a wide range of global and domestic assets.

#### 1. Yahoo Finance (`yfinance`)

- **Provider**: Yahoo Finance
- **Library**: `yfinance`
- **Coverage**: Global equities, ETFs, indices, and US Treasury yields.
- **Usage**: Used for downloading daily price data for US-listed ETFs (like SPY, GLD) and for fetching US 10-Year Treasury yield data (`^TNX`).
- **Implementation**: `src/data_center/download.py` -> `download_yfinance_data()`

```python
# From: src/data_center/download.py
import yfinance as yf

def download_yfinance_data(ticker, asset_name):
    """Download price data from Yahoo Finance"""
    ticker_obj = yf.Ticker(ticker)
    data = ticker_obj.history(period="max")
    # ... (saves data to data/raw/price)
```

#### 2. Akshare

- **Provider**: Various Chinese data providers.
- **Library**: `akshare`
- **Coverage**: China A-shares, indices, and market valuation data (P/E ratios).
- **Usage**: Used for downloading historical price data for Chinese indices (CSI300, CSI500) and for fetching market-wide P/E ratio data.
- **Implementation**: `src/data_center/download.py` -> `download_akshare_index()`, `download_pe_data()`

```python
# From: src/data_center/download.py
import akshare as ak

def download_akshare_index(symbol, asset_name):
    """Download index data from akshare"""
    data = ak.stock_zh_a_hist(symbol=symbol, period="daily", adjust="qfq")
    # ... (saves data to data/raw/price)

# Example for PE data
def download_pe_data():
    pe_data = ak.stock_index_pe_lg() # For indices like CSI300
    # ... (filters and saves data to data/raw/pe)
```

#### 3. Manual Data Files

- **Provider**: Manual download from various sources (e.g., financial data vendors, web pages).
- **Format**: `.xlsx` or `.csv`
- **Coverage**: P/E ratio data for assets where a programmatic API is unavailable or unreliable (e.g., Hang Seng Index).
- **Usage**: These files are placed in the `data/raw/pe/` directory and are processed by `src/data_center/download.py` -> `process_manual_pe_file()`.
- **Example Files**: `hsi_pe_ratio.xlsx`, `sp500_pe_ratio.csv`.

### Data Storage

- **Raw Data**: All downloaded data is first stored in the `data/raw/` directory, categorized by data type (`price`, `pe`, `yield`). This ensures that we have a persistent, untouched copy of the source data.
- **Processed Data**: For strategies that require complex calculations or derived metrics, processed data is generated by `src/data_center/data_processor.py` and stored in `data/processed/`. This avoids re-computing expensive metrics during each backtest run.